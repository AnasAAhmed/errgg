import{u as K,a as M,r,b as V,_ as j,j as s,R as _,F as $,c as H,P as I,d as O}from"./index-0f62f80c.js";const A=()=>{const b=K(),{data:n,isLoading:v,isError:N,error:y}=M(""),[c,P]=r.useState(""),[a,d]=r.useState(""),[i,w]=r.useState(""),[l,S]=r.useState(1e5),[m,u]=r.useState(1e5),[x,C]=r.useState(b.category),[o,g]=r.useState(1),[F,h]=r.useState(!1),{isLoading:E,data:t,isError:k,error:L}=V({search:a,sort:i,category:x,page:o,price:m}),p=o>1,f=(t==null?void 0:t.totalPage)===o;r.useEffect(()=>{h(!0)},[a,i,x,m]),r.useEffect(()=>{setTimeout(()=>{h(!1)},400)},[t]);const R=e=>{e.key==="Enter"&&(e.preventDefault(),u(l))},z=e=>{e.key==="Enter"&&(e.preventDefault(),d(c))};if(N){const e=y;j.error(e.data.message)}if(k){const e=L;j.error(e.data.message)}return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col  ",children:[s.jsxs("h2",{className:"text-center text-3xl font-semibold mt-10 mb-4 mx-2",children:["Filters ",s.jsx(_,{className:"inline-block mb-2"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row mx-3 sm:mx-10 md:mx-20 items-center ",children:[s.jsxs("div",{className:"mb-4 w-full flex flex-row items-center h-9 px-2 border-none dmb-4 sm:mb-0 max-sm:rounded-lg sm:rounded-l-lg bg-gray-200",children:[s.jsx("input",{type:"text",placeholder:"Search by brand or name...",value:c,onChange:e=>P(e.target.value),className:"w-full outline-none  bg-gray-200",onKeyDown:z}),s.jsx("button",{className:"h-full text-gray-600 px-2 bg-gray-100",onClick:()=>d(c),children:s.jsx($,{size:"1.2rem"})})]}),s.jsxs("div",{className:"flex flex-row",children:[s.jsxs("select",{className:" h-9 outline-none px-2 max-sm:rounded-l-lg border-none bg-gray-200 ",value:i,onChange:e=>w(e.target.value),children:[s.jsx("option",{value:"",children:"Sort"}),s.jsx("option",{value:"asc",children:"Price (Low to High)"}),s.jsx("option",{value:"dsc",children:"Price (High to Low)"}),s.jsx("option",{value:"",children:"(None)"})]}),s.jsxs("select",{className:" h-9 px-2 outline-none border-none rounded-r-lg bg-gray-200 ",value:x,onChange:e=>C(e.target.value),children:[s.jsx("option",{value:"",children:"ALL"}),!v&&(n==null?void 0:n.categories.map(e=>s.jsx("option",{value:e,children:e.toUpperCase()},e)))]})]})]}),s.jsxs("main",{className:"p-4 flex flex-col items-center ",children:[s.jsxs("h4",{className:"text-base mb-2",children:["Max Price: ",l||""]}),s.jsxs("div",{className:"mb-4 flex flex-col xsm:flex-row items-center",children:[s.jsx("input",{type:"range",min:1,max:1e5,value:l,onKeyDown:R,onChange:e=>S(Number(e.target.value)),className:"w-60 h-[35px]"}),s.jsx("button",{className:"bg-blue-300 px-3 mx-3 text-white rounded-lg",onClick:()=>u(l),children:"Go"})]}),s.jsx("h1",{className:"text-2xl font-semibold ",children:"Products"}),s.jsx("h1",{className:"text-2xl font-semibold ",children:a!==""&&`Result For ${a}`}),s.jsx("div",{className:"my-2",children:F||E?s.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:s.jsx(H,{className:"animate-spin h-36 w-36 text-gray-500"})}):s.jsx("div",{className:"md:flex md:flex-wrap grid grid-cols-2 justify-center gap-4 md:gap-16 min-h-[90vh]",children:!(t!=null&&t.products)||(t==null?void 0:t.products.length)===0?s.jsx("p",{className:"font-bold text-4xl",children:"No products found"}):t==null?void 0:t.products.map(e=>s.jsx(I,{productId:e._id,name:e.name,price:e.price,photo:e.photos[0],numOfReviews:e.numOfReviews,ratings:e.ratings,cutPrice:e.cutPrice,size:e.size?e.size[1]:"",color:e.color?e.color[1]:"",stock:e.stock},e._id))})}),t&&t.totalPage>1&&s.jsxs("article",{className:"flex justify-center items-center mt-4",children:[s.jsx("button",{disabled:!p,onClick:()=>{g(e=>e-1),window.scroll(0,0)},className:`px-4 py-2 ${p?"bg-violet-500":"bg-gray-400"} text-white rounded mr-2`,children:"Prev"}),s.jsxs("span",{className:"text-base",children:[o," of ",t.totalPage]}),s.jsx("button",{disabled:f,onClick:()=>{g(e=>e+1),window.scroll(0,0)},className:`px-4 py-2 ${f?"bg-gray-400":"bg-violet-500"} text-white rounded ml-2`,children:"Next"})]})]})]}),s.jsx(O,{})]})};export{A as default};
