import{G as w,r as o,Y as N,j as e,Z as C,c as y}from"./index-0f62f80c.js";import{o as R}from"./features-89b8e0b8.js";function S(s){return w({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z"}}]})(s)}const M=({isEditing:s,productId:x,user:a,oldRating:u,oldComment:h})=>{const[r,p]=o.useState(u||0),[i,b]=o.useState(h||""),[f,n]=o.useState(!1),[g,{isLoading:m}]=N(),j=async t=>{t.preventDefault();try{const l=await g({rating:r,photo:a.photo,comment:i,email:a.email,name:a.name,userId:a._id,productId:x});m||n(!1),R(l)}catch(l){console.error("Error creating review:",l)}},c=()=>n(!0),d=()=>n(!1),v=t=>{t.target===t.currentTarget&&d()};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:"flex flex-col items-center",children:s?e.jsx("button",{className:"text-[0.7rem] sm:text-sm px-1 py-1 rounded-md ",onClick:c,children:e.jsx(C,{})}):e.jsx("button",{onClick:c,className:"bg-blue-500 text-white px-2 py-1 rounded-full mb-1",children:"Submit Review"})}),f&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-50",onClick:v,children:e.jsxs("div",{className:"bg-white w-full animate-modal p-8 rounded-md max-w-md",children:[e.jsxs("div",{className:"flex flex-row justify-between mb-6 items-center",children:[e.jsx("h2",{className:"text-xl font-semibold ",children:"Submit Review"}),e.jsx("button",{onClick:d,className:"text-2xl rounded-md ",children:e.jsx(S,{})})]}),e.jsxs("form",{className:"space-y-4",onSubmit:j,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rating",className:"block text-md mb-3 font-medium",children:"Rating"}),e.jsx("input",{id:"rating",type:"number",max:5,className:"border px-1 rounded-md w-full",placeholder:"Rating",value:r,onChange:t=>p(Number(t.target.value))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"comment",className:"block text-md mb-3 font-medium",children:"Comment"}),e.jsx("textarea",{id:"comment",rows:3,className:"border px-1 rounded-md w-full",placeholder:"Comment",value:i,onChange:t=>b(t.target.value)})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded-md",children:m?e.jsx(y,{className:"animate-spin text-2xl mx-3"}):"Submit"})]})]})})]})};export{M as R};
