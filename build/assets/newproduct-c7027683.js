import{f as H,r,al as I,e as M,j as e,L as T,i as U,k as $,c as G}from"./index-0f62f80c.js";import{A as W}from"./AdminSidebar-9f8bfcf3.js";import{r as J}from"./features-89b8e0b8.js";const V=()=>{const{user:n}=H(t=>t.userReducer),[d,k]=r.useState(""),[m,w]=r.useState(""),[u,S]=r.useState(""),[x,C]=r.useState(1e3),[g,P]=r.useState(0),[p,F]=r.useState(""),[h,z]=r.useState(1),[j,q]=r.useState(["s","m","l","xl","xxl"]),[N,D]=r.useState([]),[b,f]=r.useState([]),[c,v]=r.useState([]),[E,y]=r.useState(!1),[L]=I(),A=M(),R=t=>{const s=t.target.files;if(s){const o=[],a=[];Array.from(s).forEach(l=>{const i=new FileReader;i.readAsDataURL(l),i.onloadend=()=>{typeof i.result=="string"&&(o.push(i.result),a.push(l),f([...b,...o]),v([...c,...a]))}})}},_=t=>{f(b.filter((s,o)=>o!==t)),v(c.filter((s,o)=>o!==t))},B=async t=>{if(t.preventDefault(),y(!0),!d||!x||h<0||!m||!c||!p||!u)return;const s=new FormData;s.set("name",d),s.set("price",x.toString()),s.set("cutPrice",g.toString()),s.set("description",p),s.set("stock",h.toString()),s.set("category",m),s.set("collections",u),c.forEach(a=>{s.append("photos",a)}),j.forEach((a,l)=>{s.append(`size[${l}]`,a)}),N.forEach((a,l)=>{s.append(`color[${l}]`,a)});const o=await L({id:n==null?void 0:n._id,formData:s});y(!1),J(o,A,"/admin/product")};return e.jsxs("div",{className:"admin-container",children:[e.jsx(W,{}),e.jsxs("main",{children:[e.jsxs(T,{to:"/admin/product",className:"flex items-center text-blue-500 mb-4",children:[e.jsx(U,{className:"mr-1"})," Back"]}),e.jsxs("article",{children:[e.jsx("h2",{className:"heading",children:"New Product"}),e.jsxs("form",{onSubmit:B,className:"grid grid-cols-2 gap-2 sm:gap-4 mx-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"font-semibold text-sm sm:text-lg block",children:"Name"}),e.jsx("input",{id:"name",required:!0,type:"text",placeholder:"Name",value:d,onChange:t=>k(t.target.value),className:"border border-gray-300 rounded-md w-[96%] px-3 py-3 "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"font-semibold text-sm sm:text-lg block",children:"Description"}),e.jsx("textarea",{id:"description",required:!0,rows:2,placeholder:"Description",value:p,onChange:t=>F(t.target.value),className:"border border-gray-300 rounded-md w-[96%] px-3 py-3 "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"font-semibold text-sm sm:text-lg block",children:"Price"}),e.jsx("input",{id:"price",required:!0,type:"number",placeholder:"Price",value:x,onChange:t=>C(Number(t.target.value)),className:"border border-gray-300 rounded-md w-[96%] px-3 py-3 "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cutPrice",className:"font-semibold text-sm sm:text-lg block",children:"Cut Price"}),e.jsx("input",{id:"cutPrice",required:!0,type:"number",placeholder:"Cut Price",value:g,onChange:t=>P(Number(t.target.value)),className:"border border-gray-300 rounded-md w-[96%] px-3 py-3 "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stock",className:"font-semibold text-sm sm:text-lg block",children:"Stock"}),e.jsx("input",{id:"stock",required:!0,type:"number",placeholder:"Stock",value:h,onChange:t=>z(Number(t.target.value)),className:"border border-gray-300 rounded-md w-[96%] px-3 py-3 "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"font-semibold text-sm sm:text-lg block",children:"Category"}),e.jsx("input",{id:"category",required:!0,type:"text",placeholder:"eg. Laptop, Camera etc.",value:m,onChange:t=>w(t.target.value),className:"border border-gray-300 rounded-md w-[96%] px-3 py-3 "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"collections",className:"font-semibold text-sm sm:text-lg block",children:"Collections"}),e.jsx("input",{id:"collections",required:!0,type:"text",placeholder:"eg. Electronic, Crocrey, Wearables etc.",value:u,onChange:t=>S(t.target.value),className:"border border-gray-300 rounded-md w-[96%] px-3 py-3 "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"size",className:"font-semibold text-sm sm:text-lg block",children:"Size (comma-separated)"}),e.jsx("input",{id:"size",type:"text",placeholder:"eg. 0(stock),S(size),0(stock), M(size),0(stock), L(size)",value:j.join(","),onChange:t=>q(t.target.value.split(",").map(s=>s.trim())),className:"border border-gray-300 rounded-md w-[96%] px-3 py-3 "})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"color",className:"font-semibold text-sm sm:text-lg block",children:"Color (comma-separated)"}),e.jsx("input",{id:"color",type:"text",placeholder:"eg. 0(stock),Red(color),0(stock), Blue(color),0(stock), Green(color),0(stock) or hex: #000000(color)",value:N.join(","),onChange:t=>D(t.target.value.split(",").map(s=>s.trim())),className:"border border-gray-300 rounded-md w-[96%] px-3 py-3 "})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-semibold text-sm sm:text-lg block",children:"Update Photos"}),e.jsx("input",{type:"file",multiple:!0,onChange:R})]}),e.jsx("div",{className:"flex flex-wrap",children:b.map((t,s)=>e.jsxs("div",{className:"relative m-2",children:[e.jsx("img",{src:t,alt:"New Image",className:"w-24 border-2 h-24 object-cover"}),e.jsx("span",{className:"absolute top-1 bg-blue-500 text-white rounded-full px-2 text-xs",children:"New"}),e.jsx("span",{className:"absolute top-1 right-1 bg-red-500 text-white rounded-full px-4 py-2 text-xs cursor-pointer",onClick:()=>_(s),children:e.jsx($,{})})]},s))}),e.jsx("button",{type:"submit",className:"bg-blue-500 w-56 h-10 mb-24 text-white text-lg rounded-md font-semibold flex justify-center items-center",children:E?e.jsx(G,{className:"animate-spin text-2xl mx-3"}):"Create"})]})]})]})]})};export{V as default};
