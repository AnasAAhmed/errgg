import{G as $,j as e,o as k,L as w,k as T,f as S,p as q,r,q as b,t as C,v as f,w as D,d as z,x as E,y as v,z as I}from"./index-0f62f80c.js";function O(a){return $({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8.6 1c1.6.1 3.1.9 4.2 2 1.3 1.4 2 3.1 2 5.1 0 1.6-.6 3.1-1.6 4.4-1 1.2-2.4 2.1-4 2.4-1.6.3-3.2.1-4.6-.7-1.4-.8-2.5-2-3.1-3.5C.9 9.2.8 7.5 1.3 6c.5-1.6 1.4-2.9 2.8-3.8C5.4 1.3 7 .9 8.6 1zm.5 12.9c1.3-.3 2.5-1 3.4-2.1.8-1.1 1.3-2.4 1.2-3.8 0-1.6-.6-3.2-1.7-4.3-1-1-2.2-1.6-3.6-1.7-1.3-.1-2.7.2-3.8 1-1.1.8-1.9 1.9-2.3 3.3-.4 1.3-.4 2.7.2 4 .6 1.3 1.5 2.3 2.7 3 1.2.7 2.6.9 3.9.6zM7.9 7.5L10.3 5l.7.7-2.4 2.5 2.4 2.5-.7.7-2.4-2.5-2.4 2.5-.7-.7 2.4-2.5-2.4-2.5.7-.7 2.4 2.5z"}}]})(a)}const R=({cartItem:a,incrementHandler:m,decrementHandler:p,removeHandler:h})=>{const{photo:u,productId:c,cutPrice:t,name:n,price:g,quantity:j,stock:l,color:i,size:d,style:x}=a;return e.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 py-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{className:"h-20 w-20 object-contain mr-4",src:`${k}/${u}`,alt:n}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(w,{to:`/product/${c}`,className:"text-lg font-medium line-clamp-1 w-70 text-gray-800 hover:text-indigo-500",children:n}),d?e.jsxs("span",{className:"text-gray-500 ",children:["Size: ",d]}):"",i?e.jsxs("span",{className:"text-gray-500 ",children:["Colour:",e.jsx("span",{className:"rounded-full ml-2 px-[11px] py-[0.5px] ",style:{backgroundColor:i}})]}):"",x?e.jsxs("span",{className:"text-gray-500 ",children:["Style: ",x]}):"",e.jsx("p",{className:"text-gray-500",children:`${l<6?`Only ${l} items left`:""}`})]})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"text-white font-bold py-1 px-3 bg-black hover:opacity-55 rounded-md",onClick:()=>p(a),children:"-"}),e.jsx("p",{className:"text-gray-700",children:j}),e.jsx("button",{className:"text-white font-bold py-1 px-3 bg-black hover:opacity-55 rounded-md",onClick:()=>m(a),children:"+"}),e.jsx("button",{onClick:()=>h(c),className:"text-gray-500 hover:text-red-500",children:e.jsx(T,{})})]}),e.jsxs("p",{className:"text-gray-500 text-center text-2xl",children:["$",g,t>0&&e.jsxs("span",{className:"text-red-500 line-through text-lg ",children:["$",t]})]})]})]})},H=()=>{const{cartItems:a,subtotal:m,tax:p,total:h,shippingCharges:u,discount:c}=S(s=>s.cartReducer),t=q(),[n,g]=r.useState(""),[j,l]=r.useState(!1),i=s=>{if(s.quantity>=s.stock)return E.error("Out of Stock");t(v({...s,quantity:s.quantity+1}))},d=s=>{s.quantity<=1||t(v({...s,quantity:s.quantity-1}))},x=s=>{t(I(s))};return r.useEffect(()=>{const{token:s,cancel:o}=b.CancelToken.source(),y=setTimeout(()=>{b.get(`${k}/api/v1/payment/discount?coupon=${n}`,{cancelToken:s}).then(N=>{t(C(N.data.discount)),l(!0),t(f())}).catch(()=>{t(C(0)),l(!1),t(f())})},1e3);return()=>{clearTimeout(y),o(),l(!1)}},[n]),r.useEffect(()=>{t(f())},[a,t]),r.useEffect(()=>{const s=localStorage.getItem("cartTimestamp");if(s){const o=new Date(JSON.parse(s));(new Date().getTime()-o.getTime())/(1e3*3600*24)>=15&&t(D())}},[t]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 my-8 mx-auto max-w-7xl px-4",children:[e.jsx("main",{className:"lg:col-span-2 min-h-[80vh]",children:a.length>0?a.map((s,o)=>e.jsx(R,{incrementHandler:i,decrementHandler:d,removeHandler:x,cartItem:s},o)):e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"No Items Added"})}),e.jsx("aside",{className:"animate-menu",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg lg:fixed",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:"Order Summary"}),e.jsxs("p",{className:"mt-4",children:["Subtotal: ",e.jsxs("span",{className:"font-semibold",children:["$",m]})]}),e.jsxs("p",{children:["Shipping Charges: ",e.jsxs("span",{className:"font-semibold",children:["$",u]})]}),e.jsxs("p",{children:["Tax: ",e.jsxs("span",{className:"font-semibold",children:["$",p]})]}),e.jsxs("p",{children:["Discount: ",e.jsxs("span",{className:"font-semibold text-red-500",children:["-$",c]})]}),e.jsx("p",{className:"mt-4",children:e.jsxs("b",{children:["Total: ",e.jsxs("span",{className:"font-semibold",children:["$",h]})]})}),e.jsxs("div",{className:"flex flex-row justify-center items-center",children:[e.jsx("input",{type:"text",placeholder:"Coupon Code",value:n,onChange:s=>g(s.target.value),className:"h-11 px-2 border border-gray-300 rounded-lg"}),n&&(j?e.jsxs("span",{className:"text-green-500 mt-2 block",children:["-$",c," off using the ",e.jsx("code",{children:n})]}):e.jsxs("span",{className:"text-red-500 mt-2 block",children:["Invalid Coupon ",e.jsx(O,{})]})),e.jsx(w,{to:`${a.length>0?"/shipping":"/cart"}`,className:`${a.length>0?"":"cursor-not-allowed"} my-6 mx-2 inline-blockbg-indigo-500 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-500`,children:"Checkout"})]})]})})]}),e.jsx(z,{})]})};export{H as default};
